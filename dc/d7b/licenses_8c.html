<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>FOSSology: src/nomos/agent/licenses.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../fossology-logo.gif"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FOSSology
   &#160;<span id="projectnumber">3.2.0rc1</span>
   </div>
   <div id="projectbrief">Open Source License Compliance by Open Source Software</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/d7b/licenses_8c.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">licenses.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>utilities to scan, score and save license found data  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;libgen.h&gt;</code><br />
<code>#include &lt;limits.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d34/nomos_8h_source.html">nomos.h</a>&quot;</code><br />
<code>#include &quot;licenses.h&quot;</code><br />
<code>#include &quot;nomos_utils.h&quot;</code><br />
<code>#include &quot;util.h&quot;</code><br />
<code>#include &quot;list.h&quot;</code><br />
<code>#include &quot;nomos_regex.h&quot;</code><br />
<code>#include &quot;parse.h&quot;</code><br />
<code>#include &quot;_autodefs.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for licenses.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d7e/licenses_8c__incl.png" border="0" usemap="#src_2nomos_2agent_2licenses_8c" alt=""/></div>
<map name="src_2nomos_2agent_2licenses_8c" id="src_2nomos_2agent_2licenses_8c">
<area shape="rect" id="node10" href="../../dd/d34/nomos_8h.html" title="Nomos header file. " alt="" coords="1447,229,1525,256"/>
<area shape="rect" id="node42" href="../../d4/de5/licenses_8h_source.html" title="licenses.h" alt="" coords="1957,155,2042,181"/>
<area shape="rect" id="node43" href="../../d7/d31/nomos__utils_8h_source.html" title="nomos_utils.h" alt="" coords="2041,80,2152,107"/>
<area shape="rect" id="node44" href="../../d8/d3c/util_8h_source.html" title="util.h" alt="" coords="2234,229,2287,256"/>
<area shape="rect" id="node45" href="../../da/d23/list_8h_source.html" title="list.h" alt="" coords="1779,155,1831,181"/>
<area shape="rect" id="node47" href="../../da/d32/nomos__regex_8h_source.html" title="nomos_regex.h" alt="" coords="2276,155,2397,181"/>
<area shape="rect" id="node49" href="../../d4/d2b/parse_8h_source.html" title="parse.h" alt="" coords="2701,80,2772,107"/>
<area shape="rect" id="node26" href="../../d0/d65/nomos__gap_8h_source.html" title="nomos_gap.h" alt="" coords="151,379,261,405"/>
<area shape="rect" id="node30" href="../../d7/ded/json__writer_8h.html" title="Handle JSON outputs. " alt="" coords="1271,304,1373,331"/>
<area shape="rect" id="node31" href="../../d8/d3b/libfossology_8h.html" title="The main FOSSology C library. " alt="" coords="789,304,895,331"/>
<area shape="rect" id="node34" href="../../d4/d4c/libfossdbmanager_8h_source.html" title="libfossdbmanager.h" alt="" coords="309,453,455,480"/>
<area shape="rect" id="node32" href="../../dc/d81/libfossscheduler_8h_source.html" title="libfossscheduler.h" alt="" coords="936,379,1071,405"/>
<area shape="rect" id="node33" href="../../dc/df8/fossconfig_8h.html" title="FOSSology library to read config file. " alt="" coords="1110,453,1209,480"/>
<area shape="rect" id="node38" href="../../d1/dd3/libfossrepo_8h_source.html" title="libfossrepo.h" alt="" coords="1197,379,1300,405"/>
<area shape="rect" id="node39" href="../../d2/d5f/libfossdb_8h_source.html" title="libfossdb.h" alt="" coords="1533,379,1623,405"/>
<area shape="rect" id="node40" href="../../d8/d2f/libfossagent_8h_source.html" title="libfossagent.h" alt="" coords="387,379,497,405"/>
<area shape="rect" id="node41" href="../../d5/da6/sqlCopy_8h_source.html" title="sqlCopy.h" alt="" coords="1426,379,1509,405"/>
<area shape="rect" id="node46" href="../../da/d42/process_8h_source.html" title="process.h" alt="" coords="2168,155,2252,181"/>
<area shape="rect" id="node50" href="../../d6/df5/doctorBuffer__utils_8h_source.html" title="doctorBuffer_utils.h" alt="" coords="2682,155,2829,181"/>
</map>
</div>
</div>
<p><a href="../../dc/d7b/licenses_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a369266c24eacffb87046522897a570d5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a369266c24eacffb87046522897a570d5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>_GNU_SOURCE</b></td></tr>
<tr class="separator:a369266c24eacffb87046522897a570d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5021a39c49d39a550a39453fd1d53c8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab5021a39c49d39a550a39453fd1d53c8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>HASHES</b>&#160;&#160;&#160;&quot;#####################&quot;</td></tr>
<tr class="separator:ab5021a39c49d39a550a39453fd1d53c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adaad053941291f0b9740732b68ec9c55"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adaad053941291f0b9740732b68ec9c55"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEBCPYRIGHT</b>&#160;&#160;&#160;&quot;debian/copyright&quot;</td></tr>
<tr class="separator:adaad053941291f0b9740732b68ec9c55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa99ec4acc4ecb2dc3c2d05da15d0e3f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afa99ec4acc4ecb2dc3c2d05da15d0e3f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#afa99ec4acc4ecb2dc3c2d05da15d0e3f">MAX</a>(a,  b)&#160;&#160;&#160;((a) &gt; (b) ? a : b)</td></tr>
<tr class="memdesc:afa99ec4acc4ecb2dc3c2d05da15d0e3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Max of two. <br /></td></tr>
<tr class="separator:afa99ec4acc4ecb2dc3c2d05da15d0e3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3acffbd305ee72dcd4593c0d8af64a4f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3acffbd305ee72dcd4593c0d8af64a4f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(a,  b)&#160;&#160;&#160;((a) &lt; (b) ? a : b)</td></tr>
<tr class="memdesc:a3acffbd305ee72dcd4593c0d8af64a4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Min of two. <br /></td></tr>
<tr class="separator:a3acffbd305ee72dcd4593c0d8af64a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab23016e1eee810c060c741da9205cd0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#aab23016e1eee810c060c741da9205cd0">LINE_BYTES</a>&#160;&#160;&#160;50</td></tr>
<tr class="separator:aab23016e1eee810c060c741da9205cd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad16ceb25430dd57a12c2bdb5b02367c8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#ad16ceb25430dd57a12c2bdb5b02367c8">LINE_WORDS</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:ad16ceb25430dd57a12c2bdb5b02367c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5b8c392e810fb3c215516577b0bb7ff"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#aa5b8c392e810fb3c215516577b0bb7ff">WC_BYTES</a>&#160;&#160;&#160;30</td></tr>
<tr class="separator:aa5b8c392e810fb3c215516577b0bb7ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ae91c3abcf35dcbb589e5380f175a30"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a2ae91c3abcf35dcbb589e5380f175a30">WC_WORDS</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:a2ae91c3abcf35dcbb589e5380f175a30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb0175156f2185dcc69089f6788a4bda"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#acb0175156f2185dcc69089f6788a4bda">PUNT_LINES</a>&#160;&#160;&#160;3</td></tr>
<tr class="separator:acb0175156f2185dcc69089f6788a4bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50fb761199e8a95d4e856e4139af452b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a50fb761199e8a95d4e856e4139af452b">MIN_LINES</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:a50fb761199e8a95d4e856e4139af452b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac6c3d553b0950370f29b8f5d532f0496"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#ac6c3d553b0950370f29b8f5d532f0496">makeLicenseSummary</a> (<a class="el" href="../../d8/d10/structlist.html">list_t</a> *l, int highScore, char *target, int size)</td></tr>
<tr class="memdesc:ac6c3d553b0950370f29b8f5d532f0496"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a 'computed license'. Wherever possible, leave off the entries for None and LikelyNot; those are individual-file results and we're making an 'aggregate summary' here.  <a href="#ac6c3d553b0950370f29b8f5d532f0496">More...</a><br /></td></tr>
<tr class="separator:ac6c3d553b0950370f29b8f5d532f0496"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab973b772ee0208bca2ef30602d44c070"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab973b772ee0208bca2ef30602d44c070"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#ab973b772ee0208bca2ef30602d44c070">noLicenseFound</a> ()</td></tr>
<tr class="memdesc:ab973b772ee0208bca2ef30602d44c070"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark curent scan as LS_NOSUM (No_license_found) <br /></td></tr>
<tr class="separator:ab973b772ee0208bca2ef30602d44c070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b24d177743db443490f68c5148f7fb5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a5b24d177743db443490f68c5148f7fb5">searchStrategy</a> (int, char *, int)</td></tr>
<tr class="separator:a5b24d177743db443490f68c5148f7fb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20ea254363709f0e6cd906557f9f11cd"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a20ea254363709f0e6cd906557f9f11cd">saveLicenseData</a> (<a class="el" href="../../d2/df5/structscanResults.html">scanres_t</a> *scores, int nCand, int nElem, int lowWater)</td></tr>
<tr class="memdesc:a20ea254363709f0e6cd906557f9f11cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save/creates all the license-data in a specific directory temp directory?  <a href="#a20ea254363709f0e6cd906557f9f11cd">More...</a><br /></td></tr>
<tr class="separator:a20ea254363709f0e6cd906557f9f11cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8e6637148f20d8e5b273b89c37d1a36"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#ae8e6637148f20d8e5b273b89c37d1a36">scoreCompare</a> (const void *arg1, const void *arg2)</td></tr>
<tr class="memdesc:ae8e6637148f20d8e5b273b89c37d1a36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two scores.  <a href="#ae8e6637148f20d8e5b273b89c37d1a36">More...</a><br /></td></tr>
<tr class="separator:ae8e6637148f20d8e5b273b89c37d1a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02e7f33ebdc1560f69a71351e38b503e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a02e7f33ebdc1560f69a71351e38b503e">printHighlightInfo</a> (GArray *keyWords, GArray *theMatches)</td></tr>
<tr class="memdesc:a02e7f33ebdc1560f69a71351e38b503e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print highlight info about matches.  <a href="#a02e7f33ebdc1560f69a71351e38b503e">More...</a><br /></td></tr>
<tr class="separator:a02e7f33ebdc1560f69a71351e38b503e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72794a028f3993b01ad07a972da24ee0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a72794a028f3993b01ad07a972da24ee0">licenseInit</a> ()</td></tr>
<tr class="memdesc:a72794a028f3993b01ad07a972da24ee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">license initialization  <a href="#a72794a028f3993b01ad07a972da24ee0">More...</a><br /></td></tr>
<tr class="separator:a72794a028f3993b01ad07a972da24ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb68a324467ea83375b06bd567dfddcb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abb68a324467ea83375b06bd567dfddcb"></a>
char *&#160;</td><td class="memItemRight" valign="bottom"><b>createRelativePath</b> (<a class="el" href="../../d9/df5/structlistitem.html">item_t</a> *p, <a class="el" href="../../d2/df5/structscanResults.html">scanres_t</a> *scp)</td></tr>
<tr class="separator:abb68a324467ea83375b06bd567dfddcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a257538e49b075c1aa4d82e392795ef4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a257538e49b075c1aa4d82e392795ef4f">scanForKeywordsAndSetScore</a> (<a class="el" href="../../d2/df5/structscanResults.html">scanres_t</a> *scores, <a class="el" href="../../d8/d10/structlist.html">list_t</a> *licenseList)</td></tr>
<tr class="separator:a257538e49b075c1aa4d82e392795ef4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd5f9a657ab550a672cb9610ada0c673"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#abd5f9a657ab550a672cb9610ada0c673">relaxScoreCriterionForSingleFile</a> (<a class="el" href="../../d2/df5/structscanResults.html">scanres_t</a> *scores)</td></tr>
<tr class="memdesc:abd5f9a657ab550a672cb9610ada0c673"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset scores to 1 if it is 0.  <a href="#abd5f9a657ab550a672cb9610ada0c673">More...</a><br /></td></tr>
<tr class="separator:abd5f9a657ab550a672cb9610ada0c673"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22366521f0f85731add74d5c3fd08eaa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a22366521f0f85731add74d5c3fd08eaa">fiterResultsOfKeywordScan</a> (int lowWater, <a class="el" href="../../d2/df5/structscanResults.html">scanres_t</a> *scores, int nFiles)</td></tr>
<tr class="memdesc:a22366521f0f85731add74d5c3fd08eaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run through the list once more.  <a href="#a22366521f0f85731add74d5c3fd08eaa">More...</a><br /></td></tr>
<tr class="separator:a22366521f0f85731add74d5c3fd08eaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a9fae7885d4c21dd2ed454747694e21"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a6a9fae7885d4c21dd2ed454747694e21">licenseScan</a> (<a class="el" href="../../d8/d10/structlist.html">list_t</a> *licenseList)</td></tr>
<tr class="memdesc:a6a9fae7885d4c21dd2ed454747694e21"><td class="mdescLeft">&#160;</td><td class="mdescRight">scan the list for a <a class="el" href="../../df/d72/structlicense.html">license(s)</a>  <a href="#a6a9fae7885d4c21dd2ed454747694e21">More...</a><br /></td></tr>
<tr class="separator:a6a9fae7885d4c21dd2ed454747694e21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361cdb128f632005e25a994f15231ac8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a361cdb128f632005e25a994f15231ac8"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a361cdb128f632005e25a994f15231ac8">printKeyWordMatches</a> (<a class="el" href="../../d2/df5/structscanResults.html">scanres_t</a> *scores, int idx)</td></tr>
<tr class="memdesc:a361cdb128f632005e25a994f15231ac8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prints keywords match to STDOUT. <br /></td></tr>
<tr class="separator:a361cdb128f632005e25a994f15231ac8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a107a18603c6005e6b2ed62a4a47be4a1"><td class="memItemLeft" align="right" valign="top">static gint&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#a107a18603c6005e6b2ed62a4a47be4a1">compare_integer</a> (gconstpointer a, gconstpointer b)</td></tr>
<tr class="memdesc:a107a18603c6005e6b2ed62a4a47be4a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two integers.  <a href="#a107a18603c6005e6b2ed62a4a47be4a1">More...</a><br /></td></tr>
<tr class="separator:a107a18603c6005e6b2ed62a4a47be4a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf0a27e6141924ec6d3d46d8614c9744"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d7b/licenses_8c.html#acf0a27e6141924ec6d3d46d8614c9744">rescanOriginalTextForFoundLicences</a> (char *textp, int isFileMarkupLanguage, int isPS)</td></tr>
<tr class="memdesc:acf0a27e6141924ec6d3d46d8614c9744"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rescan original content for the licenses already found.  <a href="#acf0a27e6141924ec6d3d46d8614c9744">More...</a><br /></td></tr>
<tr class="separator:acf0a27e6141924ec6d3d46d8614c9744"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aa420c1d4681a74a8d9c00ff1a23d8740"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa420c1d4681a74a8d9c00ff1a23d8740"></a>
static char&#160;</td><td class="memItemRight" valign="bottom"><b>any</b> [6]</td></tr>
<tr class="separator:aa420c1d4681a74a8d9c00ff1a23d8740"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6282164de4f882acbdefb417255d9bec"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6282164de4f882acbdefb417255d9bec"></a>
static char&#160;</td><td class="memItemRight" valign="bottom"><b>some</b> [7]</td></tr>
<tr class="separator:a6282164de4f882acbdefb417255d9bec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb276866b17e9ab3ed4376c4ce4d25c0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeb276866b17e9ab3ed4376c4ce4d25c0"></a>
static char&#160;</td><td class="memItemRight" valign="bottom"><b>few</b> [6]</td></tr>
<tr class="separator:aeb276866b17e9ab3ed4376c4ce4d25c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cf669d7ea2dd03e2d98facb277dbf0c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0cf669d7ea2dd03e2d98facb277dbf0c"></a>
static char&#160;</td><td class="memItemRight" valign="bottom"><b>year</b> [7]</td></tr>
<tr class="separator:a0cf669d7ea2dd03e2d98facb277dbf0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>utilities to scan, score and save license found data </p>
<dl class="section version"><dt>Version</dt><dd>"$Id: licenses.c 4032 2011-04-05 22:16:20Z bobgo $" </dd></dl>

<p>Definition in file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="aab23016e1eee810c060c741da9205cd0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LINE_BYTES&#160;&#160;&#160;50</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>fudge for punctuation, etc. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00257">257</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="ad16ceb25430dd57a12c2bdb5b02367c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LINE_WORDS&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>assume this many words per line </p>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00258">258</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="a50fb761199e8a95d4e856e4139af452b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIN_LINES&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>normal minimum-extra-lines </p>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00262">262</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="acb0175156f2185dcc69089f6788a4bda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PUNT_LINES&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>if "dunno", guess this line-count </p>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00261">261</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa5b8c392e810fb3c215516577b0bb7ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WC_BYTES&#160;&#160;&#160;30</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>wild-card counts this many bytes </p>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00259">259</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="a2ae91c3abcf35dcbb589e5380f175a30"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WC_WORDS&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>wild-card counts this many words </p>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00260">260</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a107a18603c6005e6b2ed62a4a47be4a1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static gint compare_integer </td>
          <td>(</td>
          <td class="paramtype">gconstpointer&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gconstpointer&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compare two integers. </p>
<dl class="section return"><dt>Returns</dt><dd>negative value if a &lt; b; zero if a = b; positive value if a &gt; b. </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00928">928</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="a22366521f0f85731add74d5c3fd08eaa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int fiterResultsOfKeywordScan </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lowWater</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/df5/structscanResults.html">scanres_t</a> *&#160;</td>
          <td class="paramname"><em>scores</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nFiles</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run through the list once more. </p>
<p>This time we record and count the license candidates to process. <a class="el" href="../../d6/d58/structLicense.html">License</a> candidates are determined by either (score &gt;= low) <em>OR</em> matching a set of filename patterns. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">lowWater</td><td>Lowest score to filter </td></tr>
    <tr><td class="paramname">scores</td><td>Scores to filter </td></tr>
    <tr><td class="paramname">nFiles</td><td>Number of files </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00713">713</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="a72794a028f3993b01ad07a972da24ee0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void licenseInit </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>license initialization </p>
<p>Examine the search strings in licSpec looking for 3 corner-cases to optimize all the regex-searches we'll be making:</p><ol type="1">
<li>The seed string is the same as the text-search string</li>
<li>The text-search string has length 1 and contents == "."</li>
<li>The seed string is the 'null-string' indicator</li>
</ol>
<p>Step 1, copy the tseed "search seed", decrypt it, and munge any wild- cards in the string. Note that once we eliminate the compile-time string encryption, we could re-use the same exact data. In fact, some day (in our copious spare time), we could effectively remove licSpec.</p>
<p>Step 2, add the search-seed to the search-cache</p>
<p>Step 3, handle special cases of NULL seeds and (regex == seed)</p>
<p>Step 4, decrypt and fix the regex (since seed != regex here). Once we have all that, <a class="el" href="../../dc/d7b/licenses_8c.html#a5b24d177743db443490f68c5148f7fb5">searchStrategy()</a> helps determine how many lines above and below [the seed] to save &ndash; see <a class="el" href="../../db/d97/parse_8c.html#a2b3e676125b6e93014cbfdce95c7d070" title="Check for the presence of a phrase in a file by first searching for the search key provided...">findPhrase()</a> for details.</p>
<p>Now that we've computed the above- and below-values for license searches, set each of the appropriate entries with the MAX values determined. Limit 'above' values to 3 and 'below' values to 6.</p>
<p>QUESTION: the above has worked in the past - is it STILL valid?</p>
<p>Finally (if enabled), compare each of the search strings to see if there are duplicates, and determine if some of the regexes can be searched via strstr() (instead of it's slower-but-more-functional regex brethern).</p>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00082">82</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="a6a9fae7885d4c21dd2ed454747694e21"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void licenseScan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d10/structlist.html">list_t</a> *&#160;</td>
          <td class="paramname"><em>licenseList</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>scan the list for a <a class="el" href="../../df/d72/structlicense.html">license(s)</a> </p>
<p>This routine takes a list, but in fossology we always pass in a single file.</p>
<p>Set up defaults for the minimum-scores for which we'll save files. Try to ensure a minimum # of license files will be recorded for this source/package (try, don't force it too hard); see if lower scores yield a better fit, but recognize the of a non-license file increases as we lower the bar. </p>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00759">759</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="ac6c3d553b0950370f29b8f5d532f0496"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void makeLicenseSummary </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d10/structlist.html">list_t</a> *&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>highScore</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Construct a 'computed license'. Wherever possible, leave off the entries for None and LikelyNot; those are individual-file results and we're making an 'aggregate summary' here. </p>
<p><a class="el" href="../../db/d97/parse_8c.html#a2e3ff20866d3fd6276d6462e03d0a5ed" title="Parse a file to check all the possible licenses and add them to matches. ">parseLicenses()</a> added license components found, as long as they were considered "interesting" to some extent. Components of significant interest had their iFlag set to 1; those of lower-interest were set to 0. In this way we can tier license components into 4 distinct levels: 'interesting', 'medium interest', 'nothing significant', and 'Zero'. <br />
==&gt; If the list is EMPTY, there's nothing, period. <br />
==&gt; If <a class="el" href="../../d7/d40/list_8c.html#a9c5dc47036c4010a814d8cf614b5ab71">listCount()</a> returns non-zero, "interesting" stuff is in it and we can safely ignore things of 'significantly less interest'. <br />
==&gt; If neither of these is the case, only the licenses of the above <br />
 'significantly less interest' category exist (don't ignore them).</p>
<p>We need to be VERY careful in this routine about the length of the license-summary created; they COULD be indefinitely long! For now, just check to see if we're going to overrun the buffer...</p>
<p>Construct a 'computed license'.</p>
<p>Wherever possible, leave off the entries for None and LikelyNot; those are individual-file results and we're making an 'aggregate summary' here.</p>
<dl class="section note"><dt>Note</dt><dd>This function adds licenses to cur.compLic </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l01276">1276</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="a02e7f33ebdc1560f69a71351e38b503e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void printHighlightInfo </td>
          <td>(</td>
          <td class="paramtype">GArray *&#160;</td>
          <td class="paramname"><em>keyWords</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GArray *&#160;</td>
          <td class="paramname"><em>theMatches</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Print highlight info about matches. </p>
<p>This functions prtints to STDOUT only if OPTS_HIGHLIGHT_STDOUT is set.</p>
<p>Format: <code>Keyword at &lt;start&gt;, length &lt;length&gt;, index = 0, <a class="el" href="../../d6/d58/structLicense.html">License</a> #&lt;name&gt;# at &lt;start&gt;, length &lt;length&gt;, index = &lt;license_index&gt;,</code> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">keyWords</td><td>Keywords matches </td></tr>
    <tr><td class="paramname">theMatches</td><td><a class="el" href="../../d6/d58/structLicense.html">License</a> matches </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00866">866</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="abd5f9a657ab550a672cb9610ada0c673"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void relaxScoreCriterionForSingleFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/df5/structscanResults.html">scanres_t</a> *&#160;</td>
          <td class="paramname"><em>scores</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset scores to 1 if it is 0. </p>
<p>If we were invoked with a single-file-only option, just over-ride the score calculation &ndash; give the file any greater-than-zero score so it appears as a valid candidate. This is important when the file to be evaluated has no keywords, yet might contain authorship inferences. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scores</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>It is always the case that we are doing one file at a time. </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00691">691</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="acf0a27e6141924ec6d3d46d8614c9744"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void rescanOriginalTextForFoundLicences </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>textp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>isFileMarkupLanguage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>isPS</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rescan original content for the licenses already found. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">textp</td><td>Original text string </td></tr>
    <tr><td class="paramname">isFileMarkupLanguage</td><td>Is original text a markup text </td></tr>
    <tr><td class="paramname">isPS</td><td>Is original text a PostScript text </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00948">948</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="a20ea254363709f0e6cd906557f9f11cd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void saveLicenseData </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/df5/structscanResults.html">scanres_t</a> *&#160;</td>
          <td class="paramname"><em>scores</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nCand</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>nElem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lowWater</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Save/creates all the license-data in a specific directory temp directory? </p>
<dl class="section note"><dt>Note</dt><dd>OF SPECIAL INTEREST: this function changes directory!</dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000036">Todo:</a></b></dt><dd><p class="startdd">CDB - Some initializations happen here for no particular reason </p>
<p>we should filter some names out like the shellscript does. For instance, word-spell-dictionary files will score high but will likely NOT contain a license. But the shellscript filters these names AFTER they're already scanned. Think about it. </p>
<p class="enddd">BUG: When _FTYP_POSTSCR is "(postscript|utf-8 unicode)", the resulting license-parse yields 'NoLicenseFound' but when both "postscript" and "utf-8 unicode" are searched independently, parsing definitely finds quantifiable licenses. WHY?</p>
</dd></dl>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00994">994</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d7b/licenses_8c_a20ea254363709f0e6cd906557f9f11cd_cgraph.png" border="0" usemap="#dc/d7b/licenses_8c_a20ea254363709f0e6cd906557f9f11cd_cgraph" alt=""/></div>
<map name="dc/d7b/licenses_8c_a20ea254363709f0e6cd906557f9f11cd_cgraph" id="dc/d7b/licenses_8c_a20ea254363709f0e6cd906557f9f11cd_cgraph">
<area shape="rect" id="node2" href="../../dd/d34/nomos_8h.html#af79fdada26c50b7c62057adbf4ba33ca" title="Check if an CLI option is set. " alt="" coords="235,5,330,32"/>
<area shape="rect" id="node3" href="../../d5/d97/nomos_2agent_2util_8c.html#ae8c7cab687dc1922521b20620839924a" title="Blarg. Files that are EXACTLY a multiple of the system pagesize do not get a NULL on the end of the b..." alt="" coords="241,56,325,83"/>
<area shape="rect" id="node4" href="../../dc/d7b/licenses_8c.html#ab973b772ee0208bca2ef30602d44c070" title="Mark curent scan as LS_NOSUM (No_license_found) " alt="" coords="220,107,345,133"/>
<area shape="rect" id="node5" href="../../d5/d97/nomos_2agent_2util_8c.html#a9566ab45ffe08cd042db975b1e4f4f3d" title="VERY simple line count, does NOT have to be perfect! " alt="" coords="237,157,328,184"/>
<area shape="rect" id="node6" href="../../dc/d7b/licenses_8c.html#a361cdb128f632005e25a994f15231ac8" title="Prints keywords match to STDOUT. " alt="" coords="203,208,362,235"/>
<area shape="rect" id="node7" href="../../dd/d81/nomos__regex_8c.html#a1b4dd398ac13b4740d8e00e1ea65c8c8" title="compile a regex, and perform the search (on data?) " alt="" coords="247,259,318,285"/>
<area shape="rect" id="node8" href="../../db/d97/parse_8c.html#a2e3ff20866d3fd6276d6462e03d0a5ed" title="Parse a file to check all the possible licenses and add them to matches. " alt="" coords="226,309,339,336"/>
<area shape="rect" id="node9" href="../../d5/d97/nomos_2agent_2util_8c.html#a7c0e3895ed06433c641206183282b58e" title="Create a copy of a string. " alt="" coords="237,360,328,387"/>
<area shape="rect" id="node10" href="../../d5/d97/nomos_2agent_2util_8c.html#a927548efd0863632e6ef0772e6d7fc8e" title="Raise an assert. " alt="" coords="251,411,314,437"/>
<area shape="rect" id="node11" href="../../d7/d40/list_8c.html#a5fec5dbcf5422eb7641a577438dda2d0" title="get an item from the itemlist. If the item is not in the itemlist, then add it to the itemlist..." alt="" coords="237,461,329,488"/>
<area shape="rect" id="node12" href="../../dc/d7b/licenses_8c.html#acf0a27e6141924ec6d3d46d8614c9744" title="Rescan original content for the licenses already found. " alt="" coords="184,513,381,554"/>
<area shape="rect" id="node13" href="../../d5/d97/nomos_2agent_2util_8c.html#a24d54fafa423904913b8a50f4265b414" title="munmapFile" alt="" coords="233,579,333,605"/>
<area shape="rect" id="node14" href="../../d7/d40/list_8c.html#a50a7d85803c1b3d273421722c07587a3" title="print the passed in list " alt="" coords="243,629,322,656"/>
<area shape="rect" id="node17" href="../../d7/d40/list_8c.html#abb9ab172cb48e362f1fef4871054449b" title="return a pointer to listitem, returns a NULL_ITEM when no more items to return. " alt="" coords="241,680,324,707"/>
<area shape="rect" id="node18" href="../../d7/d40/list_8c.html#aea7636c16838654137711f946dbedff2" title="Destroy list_t. " alt="" coords="246,731,319,757"/>
<area shape="rect" id="node19" href="../../d7/d40/list_8c.html#ae72865f148be2b7e823e3ae75e536c2f" title="Sort the list as per the sortType passed. " alt="" coords="249,781,316,808"/>
<area shape="rect" id="node20" href="../../dc/d7b/licenses_8c.html#ac6c3d553b0950370f29b8f5d532f0496" title="Construct a &#39;computed license&#39;. Wherever possible, leave off the entries for None and LikelyNot; thos..." alt="" coords="198,832,367,859"/>
<area shape="rect" id="node21" href="../../d7/ded/json__writer_8h.html#a03d0e23137567e725ead273b60abc242" title="Write the scan output as a JSON. " alt="" coords="243,883,322,909"/>
<area shape="rect" id="node22" href="../../dc/d7b/licenses_8c.html#a02e7f33ebdc1560f69a71351e38b503e" title="Print highlight info about matches. " alt="" coords="217,933,348,960"/>
<area shape="rect" id="node15" href="../../d0/da5/libfossagent_8c.html#a4cab43818321714ab944d8323575a401" title="Get the maximum group privilege. " alt="" coords="429,604,480,631"/>
<area shape="rect" id="node16" href="../../dd/d34/nomos_8h.html#aa4aa3468fba5dfb2a0ad91ce91faec83" title="Close connections and exit. " alt="" coords="432,655,477,681"/>
</map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a257538e49b075c1aa4d82e392795ef4f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scanForKeywordsAndSetScore </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/df5/structscanResults.html">scanres_t</a> *&#160;</td>
          <td class="paramname"><em>scores</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/d10/structlist.html">list_t</a> *&#160;</td>
          <td class="paramname"><em>licenseList</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For EACH file, determine if we want to scan it, and if so, scan the candidate files for keywords (to obtain a "score" &ndash; the higher the score, the more likely it has a real open source license in it).</p>
<p>There are lots of things that will 'disinterest' us in a file (below). </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">scores</td><td></td></tr>
    <tr><td class="paramname">licenseList</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This loop is called 400,000 to 500,000 times when parsing a distribution. Little slow-downs ADD UP quickly! </dd>
<dd>
Some other part of FOSSology has already decided we want to scan this file, so we need to look into removing this file scoring stuff. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000035">Todo:</a></b></dt><dd>We don't currently use _UTIL_FILTER, which is set up to exclude some files by filename. </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00606">606</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="ae8e6637148f20d8e5b273b89c37d1a36"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int scoreCompare </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>arg1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>arg2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compare two scores. </p>
<dl class="section return"><dt>Returns</dt><dd>-1 ; If score1 &gt; score2 <br />
 1 ; If score1 &lt; score2 <br />
-1 ; If fullpath1 != NULL and follpath2 = NULL <br />
 1 ; If fullpath1 = NULL and follpath2 != NULL <br />
 ; String comparison of fullpath if conditions above fails </dd></dl>
<dl class="section note"><dt>Note</dt><dd>this procedure is a qsort callback that provides a REVERSE integer sort (highest to lowest) </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00821">821</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
<a class="anchor" id="a5b24d177743db443490f68c5148f7fb5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int searchStrategy </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>regex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>aboveCalc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section note"><dt>Note</dt><dd>This function should be called BEFORE the wild-card specifier =ANY= is converted to a REAL regex ".*" (e.g., before fixSearchString())!</dd></dl>
<p>ASSUME a "standard line-length" of 50 characters/bytes. That's likely too small, but err on the side of being too conservative.</p>
<p>Determining for the number of text-lines ABOVE involves finding out how far into the 'license footprint' the seed-word resides. ASSUME a standard line-length of 50 (probably too small, but we'll err on the side of being too conservative. If the seed isn't IN the regex, assume a generally-bad worst-case and search 2-3 lines above.</p>
<p>Determining for the number of text-lines BELOW involves finding out how long the 'license footprint' actually is, plus adding some fudge based on the number of wild-cards in the footprint. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td><a class="el" href="../../d6/d58/structLicense.html">License</a> index from Strings.in </td></tr>
    <tr><td class="paramname">regex</td><td>regex to match for </td></tr>
    <tr><td class="paramname">aboveCalc</td><td>Set to look above </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/d7b/licenses_8c_source.html#l00285">285</a> of file <a class="el" href="../../dc/d7b/licenses_8c_source.html">licenses.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../dir_261d628ce2f93f45eb056ee2de99033c.html">nomos</a></li><li class="navelem"><a class="el" href="../../dir_3a3431fcc62b57407e0205bfc1203ee7.html">agent</a></li><li class="navelem"><a class="el" href="../../dc/d7b/licenses_8c.html">licenses.c</a></li>
    <li class="footer">Generated on Mon Jun 29 2020 12:03:45 for FOSSology by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
